<!DOCTYPE HTML>
<html>
	<head>
		<title>Validation</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--OpenLayers-->
		<link rel="stylesheet" href ="libraries/v6.4.3/css/ol.css">
		<script src="libraries/v6.4.3/build/ol.js"></script>
		<!--Layers switcher-->
		<link rel="stylesheet" href="http://rawgit.com/walkermatt/ol-layerswitcher/master/src/ol-layerswitcher.css">
		<script src="http://rawgit.com/walkermatt/ol-layerswitcher/master/dist/ol-layerswitcher.js"></script>
		
		<!--jQuery-->
		<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
		<script src="assets/js/jquery.min.js"></script>
		<!--Bootstrap-->
		<link rel="stylesheet" href="libraries/v6.4.3/apidoc/styles/bootstrap.min.css" type="text/css">
		<script src="libraries/v6.4.3/apidoc/scripts/bootstrap.bundle.min.js"></script>


		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a href="index.html" class="title">Lab Project</a>
				<nav>
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="intercomparison.html">Intercomparison</a></li>
						<li><a href="validation.html" class="active">Validation</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main" class="wrapper">
						<div class="inner">
							<h1 class="major">Validation</h1>
							<p class="p_list">In this section, we <strong>compared the two datasets with a reference one</strong>, in order to <strong>determine their accuracy independently of one another</strong>. To do so, the maps were <strong>reclassified</strong> to obtain thematic maps of <strong>built/not built areas.</strong> We represented these areas with the following numbers:</p>
							<ul class="classified">
								<li><strong>1</strong>: not built</li>
								<li><strong>2</strong>: built</li>
							</ul>
							<p class="p_list">Then, we created a <strong>map of differences</strong> to visualize where the maps have the same classification and where they are different. The areas are classified as:</p>
							<ul class="classified">
								<li><strong>0</strong>: GHS not populated and WorldPop populated</li>
								<li><strong>1</strong>: GHS and WolrdPop either both populated or unpopulated</li>
								<li><strong>2</strong>: GHS populated and WorldPop not populated</li>
							</ul>
							<p class="comments">Using the map of differences, <strong>sampling points</strong> were selected keeping a balanced ratio of the 3 classes above (33% for class 0, 34% for class 1 and 33% for class2). Doing a <strong>photo-interpretation of satellite images</strong>, we were able to classify the points manually into built and not built. With this classification, we can analyze the accuracy of each dataset.</p>
							<p class="comments">On the map below, there are the reclassified maps, the map of differences and the sampling points.</p>
							<table>
								<tbody>
									<tr>
										<td id="map_table">
											<div id="map_validation" class="map_rec">
												<div id="popup"></div>
											</div>
											<div id="map_title">Reclassified maps</div>
										</td>
										<td id="td_legend_rec">
											<div class="legend"><img id="legend_valid_rec"/></div>
											<div id="map_legend">Classes for reclassifiend maps</div>
											<br>
											<div class="legend"><img id="legend_valid_diff"/></div>
											<div id="map_legend">Classes for map of differences</div>
										</td>
									</tr>
								</tbody>
							</table>

							<p class="title_section">Data reports from the maps</p>					
							<p class="comments">Using the QGIS raster tool "raster layer unique values report" again, we have computed the number of cell per class for both reclassified maps and for the map of differences.</p>
							<p class="p_list">For the <strong>GHS reclassified</strong>, we have:</p>
								<ul class="classified">
									<li>Not Built (1): 17 859 195 px (85%)</li>
									<li>Built (2): 3 227 598 px (15%)</li>									
								</ul>
							<p class="p_list">For the <strong>WorldPop reclassified</strong>, we have:</p>
								<ul class="classified">
									<li>Not Built (1): 12 425 010 px (59%)</li>
									<li>Built (2): 8 661 783 px (41%)</li>									
								</ul>
							<p class="p_list">For the <strong>map of differences</strong>, we have:</p>
								<ul class="classified">
									<li>GHS not populated and WorldPop populated (0): 5 497 550 px (26.1%)</li>
									<li>GHS and WolrdPop either both populated or unpopulated (1): 15 525 878 px (73.6%)</li>
									<li>GHS populated and WorldPop not populated (2): 63 365 px (0.3%)</li>								
								</ul>


							<p class="title_section">First comments on the maps</p>

							<p class="comments">From the maps and the data presented above, we can comment and conclude some things.</p>

							<p class="comments">First of all, looking at the map of differences and the associated data computed above, we see that there are few places where the GHS map is classified as built and the WorldPop as not built (only 0.3% of cells!). In contrast, there are much more places where the opposite occurs (26.1% of cells). Thus, here again we notice that the method used to build each dataset affects the distribution of population through the map: <strong>there are much more WorldPop built cells (41%) than GHS built cells (15%).</strong></p>

							<p class="comments">However, <strong>the large majority of the cells have the same classification on the 2 maps (73.6%)</strong>. We can identify that <strong>a big part of Russian and Mongolian territories</strong> are cells where GHS and WorldPop have the same classification (class 1 of the map of differences) and <strong>most of them are places classified as not built</strong>. Also, <strong>most of Chinese, Korean and Japanese territories are classified as built for the WorldPop dataset</strong> so, in these regions, the cells with same classification correspond to the "built" cells of GHS-Pop. This can easily be observed by comparing the map of differences and the GHS-Pop map, which are very similar in these regions.</p>

							<p class="comments">For the <strong>sampling points,</strong> we can state that they are <strong>well distributed</strong> in the analyzed area. However, due to the fact that we tried to balance the number of points for the 3 classes, the ones related to the few areas (0.3%) where the GHS is built and the WorldPop is not built <strong>(class 2) are really aggregated.</strong> We can see that happening in Northeast China and in Mongolia. In addition, by checking the classifications for these specific points, most of them show that these areas were classified by us as "Not Urban".</p>
							<br>


							<p class="title_section">Error Matrices and Associated Accuracy Indexes</p>

							<p class="p_list">With the help of the <strong><em>"Accuracy_assessment_and_sampling.py"</em> script,</strong> we were able to compute the error matrix of the classifications and some indexes that help us analyze the accuracy of each dataset. The indexes are:</p>
							<ul class="classified">
								<li><strong>User's Accuracy (UA)</strong>: shows how often a user of thematic raster can expect to find the class on the ground;</li>
								<li><strong>Producer's Accuracy (PA)</strong>: probability that the class present on the ground is also captured by classification in the thematic raster;</li>
								<li><strong>Overall Accuracy (OA)</strong>: proportion of correctly classified pixels in total number of pixels.</li>
							</ul>

							<p class="comments">For the <strong>GHS dataset</strong>, we have:</p>
							<table class="table_2parts">
								<tr class="table_title">
									<td><strong>Error Matrix</strong></td>
									<td><strong>Associated Accuracy Indexes</strong></td>
								<tr class="no_lines">
									<td class="column">
										<table class="matrix">
											<tr>
												<td><strong>GHS class/Classified</strong></td>
												<td><strong>Not Urban</strong></td>
												<td><strong>Urban</strong></td>
											</tr>
											<tr>
												<td><strong>Not Urban</strong></td>
												<td>191</td>
												<td>40</td>
											</tr>
											<tr>
												<td><strong>Urban</strong></td>
												<td>125</td>
												<td>44</td>
											</tr>
										</table>
									</td>
									<td class="column">
										<table class="matrix">
											<tr>
												<td><strong>UA</strong></td>
												<td><strong>PA</strong></td>
												<td><strong>OA</strong></td>
											</tr>
											<tr>
												<td>0.83</td>
												<td>0.6</td>
												<td><strong>0.5875</strong></td>
											</tr>
											<tr>
												<td>0.26</td>
												<td>0.52</td>
											</tr>
										</table>
									</td>
								</tr>	
							</table>
							<p class="comments">For the <strong>WorldPop dataset</strong>, we have:</p>
							<table class="table_2parts">
								<tr class="table_title">
									<td><strong>Error Matrix</strong></td>
									<td><strong>Associated Accuracy Indexes</strong></td>
								<tr class="no_lines">
									<td class="column">
										<table class="matrix">
											<tr>
												<td><strong>WorldPop class/Classified</strong></td>
												<td><strong>Not Urban</strong></td>
												<td><strong>Urban</strong></td>
											</tr>
											<tr>
												<td><strong>Not Urban</strong></td>
												<td>221</td>
												<td>10</td>
											</tr>
											<tr>
												<td><strong>Urban</strong></td>
												<td>95</td>
												<td>74</td>
											</tr>
										</table>
									</td>
									<td class="column">
										<table class="matrix">
											<tr>
												<td><strong>UA</strong></td>
												<td><strong>PA</strong></td>
												<td><strong>OA</strong></td>
											</tr>
											<tr>
												<td>0.96</td>
												<td>0.7</td>
												<td><strong>0.7375</strong></td>
											</tr>
											<tr>
												<td>0.44</td>
												<td>0.88</td>
											</tr>
										</table>
									</td>
								</tr>	
							</table>
							<p class="comments">Looking at the error matrices, specially to their off-diagonal, we can see that <strong>most of incorrectly classified points are the ones that are "Urban" on the thematic raster</strong> but were classified as "Not Urban" by us. It's important to highlight that during the classification, some points were not very easy to classify considering that some images may not make it clear if they have or not a building.</p>						
							<p class="comments">Analyzing the indexes, we can notice that for both datasets the <strong>User's Accuracy (UA) for "Not Urban" areas were very high</strong>, including a 96% for the WorldPop. It means that most of the not urban points on the thematic rasters were also classified as not urban. In contrast, <strong>the UA for "Urban" areas has very low numbers</strong>. Regarding the Producer's Accuracy, the two WorldPop indexes are higher thant the GHS ones.</p>
							<p class="comments">Finally, looking at the Overall Accuracy, we can see that it's around 59% for GHS and 74% for WorldPop. Based on these numbers, it's possible to conclude that <strong>the WorldPop dataset is more accurate to classify areas into "Urban" and "Not Urban" areas than the GHS one</strong>.</p>
							<br>

							<p class="title_section">Conclusion of Validation</p>
							<p class="comments">As already said in the Intercomparion section, the WorldPop dataset has a more sparsed data and by making an overlap of the two reclassified maps, we were able to confirm this statement. This also enabled us to state that <strong>the WorldPop has more built cells than the GHS dataset</strong>.</p>
							<p class="comments">While the error matrices highlighted <strong>the large majority of cells incorrectly classified as "Urban" on the raster maps</strong>, the computation of accuracy indexes revealed a <strong>higher accuracy for the WorldPop dataset</strong>.
							<p class="comments">Thus, this validation section brougth out a new conclusion regarding the accuracy of each dataset. The WorldPop one turned out to be more accurate than GHS_Pop, for all accuracy indexes we computed. Therefore, <strong>the WorldPop dataset seems to be better to reprint the reality we see on the ground</strong>. </p>
						</div>
					</section>

			</div>

			<!-- Footer -->
				<footer id="footer" class="wrapper alt">
					<div class="inner">
						<ul class="menu">
							<li>Mathilde Puche and Eric Yuzo</li>
						</ul>
					</div>
				</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/validation_map.js"></script>



	</body>
</html>
