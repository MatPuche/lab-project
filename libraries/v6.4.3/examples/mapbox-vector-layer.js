(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{424:function(e,t,r){"use strict";r.r(t);var o=r(3),s=r(48),n=r(14),i=r(102),a=r(46),c=r(94),l=r(87),u=r(171);function p(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}var h=function(e){function t(t){e.call(this,n.a.ERROR),this.error=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(s.a),f="vector",d=function(e){function t(t){var r=!("declutter"in t)||t.declutter,o=new l.a({state:a.a.LOADING,format:new i.a});e.call(this,{source:o,declutter:r,className:t.className,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,minResolution:t.minResolution,maxResolution:t.maxResolution,minZoom:t.minZoom,maxZoom:t.maxZoom,renderOrder:t.renderOrder,renderBuffer:t.renderBuffer,renderMode:t.renderMode,map:t.map,updateWhileAnimating:t.updateWhileAnimating,updateWhileInteracting:t.updateWhileInteracting,preload:t.preload,useInterimTilesOnError:t.useInterimTilesOnError}),this.sourceId=t.source,this.layers=t.layers,this.accessToken=t.accessToken,this.fetchStyle(t.styleUrl)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.fetchStyle=function(e){var t=this,r=function(e,t){var r=p(e);if(!r)return e;if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: "+e);return"https://api.mapbox.com/styles/v1/"+r.slice("styles/".length)+"?&access_token="+t}(e,this.accessToken);fetch(r).then((function(e){if(!e.ok)throw new Error("unexpected response when fetching style: "+e.status);return e.json()})).then((function(e){t.onStyleLoad(e)})).catch((function(e){t.handleError(e)}))},t.prototype.onStyleLoad=function(e){var t,r,o=this;if(this.layers){for(var s,n={},i=0;i<e.layers.length;++i){var c=e.layers[i];c.source&&(n[c.id]=c.source)}for(var l=0;l<this.layers.length;++l){var h=n[this.layers[l]];if(!h)return void this.handleError(new Error("could not find source for "+this.layers[l]));if(s){if(s!==h)return void this.handleError(new Error("layers can only use a single source, found "+s+" and "+h))}else s=h}t=s,r=this.layers}else r=t=this.sourceId;r||(r=t=Object.keys(e.sources)[0]),e.sprite&&(e.sprite=function(e,t){var r=p(e);if(!r)return e;if(0!==r.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);return"https://api.mapbox.com/styles/v1/"+r.slice("sprites/".length)+"/sprite?access_token="+t}(e.sprite,this.accessToken)),e.glyphs&&(e.glyphs=function(e,t){var r=p(e);if(!r)return e;if(0!==r.indexOf("fonts/"))throw new Error("unexpected fonts url: "+e);return"https://api.mapbox.com/fonts/v1/"+r.slice("fonts/".length)+"/0-255.pbf?access_token="+t}(e.glyphs,this.accessToken));var d=e.sources[t];if(d.type===f){var y,m,v,w=this.getSource();w.setUrl((y=d.url,m=this.accessToken,(v=p(y))?"https://{a-d}.tiles.mapbox.com/v4/"+v+"/{z}/{x}/{y}.vector.pbf?access_token="+m:y)),Object(u.a)(this,e,r).then((function(){w.setState(a.a.READY)})).catch((function(e){o.handleError(e)}))}else this.handleError(new Error("only works for vector sources, found "+d.type))},t.prototype.handleError=function(e){this.dispatchEvent(new h(e)),this.getSource().setState(a.a.ERROR)},t}(c.a),y=r(2);new o.a({target:"map",layers:[new d({styleUrl:"mapbox://styles/mapbox/bright-v9",accessToken:"pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2pzbmg0Nmk5MGF5NzQzbzRnbDNoeHJrbiJ9.7_-_gL8ur7ZtEiNwRfCy7Q"})],view:new y.a({center:[0,0],zoom:2})})}},[[424,0]]]);
//# sourceMappingURL=mapbox-vector-layer.js.map